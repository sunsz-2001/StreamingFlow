TAG: 'dsec_event_eval'  # 训练日志和检查点保存目录名

GPUS: [0]
BATCHSIZE: 16
PRECISION: 32  # 16 或 32，混合精度训练使用 16
EPOCHS: 100  # 训练轮数

N_WORKERS: 4  # 数据加载器工作进程数
# LOG_DIR: 'logs'  # 日志保存目录（默认：'logs'）
# GRAD_NORM_CLIP: 5  # 梯度裁剪阈值（默认：5）
# LOGGING_INTERVAL: 500  # 日志记录间隔（默认：500）
# VIS_INTERVAL: 5000  # 可视化间隔（默认：5000）

DATASET:
  NAME: 'dsec'
  DATAROOT: '/media/switcher/sda/datasets/dsec'
  EVENTS_ROOT: ''  # 若事件帧已与图像同目录，可保留为空
  EVENTS_FILE_SUFFIX: '.npz'
  EVENTS_NORMALIZATION: 255.0
  EVENTS_FALLBACK_ZERO: True
  EVENT_CAMERAS: ['camera_0']
  VERSION: 'trainval'

TIME_RECEPTIVE_FIELD: 1
N_FUTURE_FRAMES: 0

IMAGE:
  FINAL_DIM: [256, 512]
  RESIZE_SCALE: 1.0
  TOP_CROP: 0
  ORIGINAL_HEIGHT: 256
  ORIGINAL_WIDTH: 512
  NAMES: ['camera_0']

LIFT:
  GT_DEPTH: False
  GEN_DEPTH: False
  X_BOUND: [-50.0, 50.0, 0.5]  # Forward direction [min, max, resolution]
  Y_BOUND: [-50.0, 50.0, 0.5]  # Side direction [min, max, resolution]
  Z_BOUND: [-10.0, 10.0, 20.0]  # Height [min, max, resolution]
  D_BOUND: [2.0, 50.0, 1.0]  # Depth [min, max, resolution]

MODEL:
  MODALITY:
    USE_CAMERA: False
    USE_EVENT: True
    USE_LIDAR: False
    USE_RADAR: False
  ENCODER:
    NAME: 'efficientnet-b0'
    OUT_CHANNELS: 64
    DOWNSAMPLE: 8
    USE_DEPTH_DISTRIBUTION: False
  EVENT:
    BACKBONE: 'presnet50'
    BINS: 5
    IN_CHANNELS: 5  # 直接使用5个通道，不进行时间维度堆叠
    HIDDEN_DIM: 256
    NUM_ENCODER_LAYERS: 1
    NUM_HEADS: 8
    PRETRAINED: False
    FREEZE_BACKBONE: False
    MULTISCALE_FUSION: 'sum'
    FUSION_TYPE: 'independent'
    BEV_FUSION: 'sum'
    USE_DEPTH_HEAD: True
    DEPTH_BINS: 80
    DEPTH_HEAD_CHANNELS: 128
    RESIDUAL_INIT: 0.0
    INPUT_SIZE: [240, 320]  # Event 输入分辨率 [H, W]
    DOWNSAMPLE: 8  # Event encoder 下采样率（EventEncoderEvRT 固定为 8）
  TEMPORAL_MODEL:
    NAME: 'identity'
    INPUT_EGOPOSE: False
    START_OUT_CHANNELS: 64  # 输出通道数，需与ENCODER.OUT_CHANNELS匹配

SEMANTIC_SEG:
  PEDESTRIAN:
    ENABLED: False
  HDMAP:
    ENABLED: False

INSTANCE_SEG:
  ENABLED: False

INSTANCE_FLOW:
  ENABLED: False

PLANNING:
  ENABLED: False

DETECTION:
  ENABLED: True
  NUM_CLASSES: 3  # Vehicle, Cyclist, Pedestrian三个类别
  NUM_PROPOSALS: 128
  HIDDEN_CHANNEL: 128
  NUM_DECODER_LAYERS: 3
  NUM_HEADS: 8
  NMS_KERNEL_SIZE: 1
  FFN_CHANNEL: 256
  DROPOUT: 0.1
  AUXILIARY: True
  OUT_SIZE_FACTOR: 8
  DATASET: 'dsec'

OPTIMIZER:
  LR: 1e-4
  WEIGHT_DECAY: 1e-7

PRETRAINED:
  LOAD_WEIGHTS: False
